version: "2.0"
test:
  image: daocloud/ci-python:3.4
  services:
  - mysql
  env:
  - MYSQL_INSTANCE_NAME=postgres
  - MYSQL_USERNAME=postgres
  - MYSQL_PASSWORD=
  install:
  - sudo apt-get update
  - pip install coverage
  before_script:
  - pip install -r requirements.txt
  script:
  - coverage run --source='.' manage.py test
  - coverage report
build:
  image:
    dockerfile_path: /Dockerfile
    build_dir: /
    cache: true